<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todoapp</title>
    <script type="text/javascript">
      var pathSegmentsToKeep = 1;
      var l = window.location;
      (function () {
        // If we've already rewritten the URL (search begins with '?/'), do nothing to avoid double-encoding
        if (l.search && l.search.slice(0, 2) === "?/") {
          return;
        }
        // Build the base (protocol + host + optional port)
        var protocolHost =
          l.protocol + "//" + l.hostname + (l.port ? ":" + l.port : "");

        // Keep the first N segments as before
        var keep = l.pathname
          .split("/")
          .slice(0, 1 + pathSegmentsToKeep)
          .join("/");

        // Encode each remaining path segment to safely include special chars like &
        var restSegments = l.pathname
          .slice(1)
          .split("/")
          .slice(pathSegmentsToKeep);
        var encodedRest = restSegments
          .map(function (s) {
            return encodeURIComponent(s);
          })
          .join("/");

        // Encode the search (query) string (without leading '?'), prefix with '&' to preserve original concatenation
        var search = l.search
          ? "&" + encodeURIComponent(l.search.slice(1))
          : "";

        var newUrl =
          protocolHost + keep + "/?/" + encodedRest + search + l.hash;
        l.replace(newUrl);
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
